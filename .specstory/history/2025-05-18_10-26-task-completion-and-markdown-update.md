<!-- Generated by SpecStory -->

# Task Completion and Markdown Update (2025-05-18 06:26:42)

_**User**_

@TASK-015-019.md @TASK-020-024.md  complete tasks 20-24  then update md file as instructed 

---

_**Assistant**_



---

I'll implement the interactive components for TASK-020-024 and update the task file. Let's first check the project structure.

---

Could not resolve URI: Error: Unable to resolve nonexistent file 'd:\Sanza-TV-App_QuickPoll_v1\src'

---

Let me first check the root directory structure.

---

<details>
            <summary>Listed current directory â€¢ **8** results</summary>
        
| Name |
|-------|
| ğŸ“ `tasks` |
| ğŸ“ `StreamVibe` |
| ğŸ“„ `TASK-LIST.md` |
| ğŸ“ `docs` |
| ğŸ“„ `README.md` |
| ğŸ“„ `TASK-TEMPLATE.md` |
| ğŸ“„ `.cursorindexingignore` |
| ğŸ“ `.specstory` |

</details>

---

Let's check the StreamVibe directory as it likely contains our source code.

---

<details>
            <summary>Listed directory StreamVibe â€¢ **13** results</summary>
        
| Name |
|-------|
| ğŸ“ `src` |
| ğŸ“„ `vite.config.ts` |
| ğŸ“„ `index.html` |
| ğŸ“ `node_modules` |
| ğŸ“„ `pnpm-lock.yaml` |
| ğŸ“ `public` |
| ğŸ“„ `package.json` |
| ğŸ“„ `README.md` |
| ğŸ“„ `tsconfig.app.json` |
| ğŸ“„ `tsconfig.node.json` |
| ğŸ“„ `tsconfig.json` |
| ğŸ“„ `eslint.config.js` |
| ğŸ“„ `.gitignore` |

</details>

---

Now let's check the src directory structure:

---

<details>
            <summary>Listed directory StreamVibe/src â€¢ **15** results</summary>
        
| Name |
|-------|
| ğŸ“ `context` |
| ğŸ“ `components` |
| ğŸ“ `hooks` |
| ğŸ“ `services` |
| ğŸ“ `types` |
| ğŸ“„ `App.tsx` |
| ğŸ“ `utils` |
| ğŸ“ `pages` |
| ğŸ“ `navigation` |
| ğŸ“ `styles` |
| ğŸ“„ `main.tsx` |
| ğŸ“ `assets` |
| ğŸ“„ `vite-env.d.ts` |
| ğŸ“„ `index.css` |
| ğŸ“„ `App.css` |

</details>

---

Let's check the components directory structure:

---

<details>
            <summary>Listed directory StreamVibe/src/components â€¢ **5** results</summary>
        
| Name |
|-------|
| ğŸ“ `ui` |
| ğŸ“ `pages` |
| ğŸ“ `content` |
| ğŸ“ `navigation` |
| ğŸ“ `layout` |

</details>

---

Let's check if we need to create any additional directories:

---

Could not resolve URI: Error: Unable to resolve nonexistent file 'd:\Sanza-TV-App_QuickPoll_v1\StreamVibe\src\components\search'

---

Could not resolve URI: Error: Unable to resolve nonexistent file 'd:\Sanza-TV-App_QuickPoll_v1\StreamVibe\src\components\video'

---

Now let's check what's in the UI components directory:

---

<details>
            <summary>Listed directory StreamVibe/src/components/ui â€¢ **5** results</summary>
        
| Name |
|-------|
| ğŸ“„ `Modal.tsx` |
| ğŸ“„ `FocusableItem.tsx` |
| ğŸ“„ `FocusIndicator.css` |
| ğŸ“„ `FocusIndicator.tsx` |
| ğŸ“„ `FocusableButton.tsx` |

</details>

---

Let me check the navigation system since all our components need to work with it:

---

<details>
            <summary>Listed directory StreamVibe/src/navigation â€¢ **1** results</summary>
        
| Name |
|-------|
| ğŸ“„ `routes.ts` |

</details>

---

Let me check if we already have any content carousel components:

---

<details>
            <summary>Listed directory StreamVibe/src/components/content â€¢ **1** results</summary>
        
| Name |
|-------|
| ğŸ“„ `ContentCard.tsx` |

</details>

---

Let's look at the existing Button/FocusableButton component to understand the existing implementation and see if it needs to be enhanced:

---

Read file: StreamVibe/src/components/ui/FocusableButton.tsx

---

Let's examine the NavigationContext to understand the focus management system:

---

<details>
            <summary>Searched codebase "NavigationContext" â€¢ **1** results</summary>
        
| File |
|------|
| `undefined` |

</details>

---

Read file: StreamVibe/src/context/NavigationContext.tsx

---

Read file: StreamVibe/src/context/NavigationContext.tsx

---

Read file: StreamVibe/src/components/content/ContentCard.tsx

---

Read file: StreamVibe/src/components/content/ContentCard.tsx

---

Read file: StreamVibe/src/components/ui/FocusableItem.tsx

---

Read file: StreamVibe/src/hooks/useFocus.ts

---

Read file: StreamVibe/src/hooks/useNavigation.ts

---

Now that I understand the project's architecture and the components I need to implement, I'll start creating each of the required components.

Let's first create the directories we need:

---

```bash
mkdir -p StreamVibe/src/components/search StreamVibe/src/components/video
```

```
PS D:\Sanza-TV-App_QuickPoll_v1> mkdir -p StreamVibe/src/components/search Strea
mVibe/src/components/vide

```

---

Now, let's implement each component one by one. First, I'll enhance the Button component:

---

```diff
- 
+ import React from 'react';
+ import styled, { css } from 'styled-components';
+ import FocusableItem from './FocusableItem';
+ 
+ // Button variants
+ export type ButtonVariant = 'primary' | 'secondary' | 'text' | 'icon' | 'danger';
+ export type ButtonSize = 'small' | 'medium' | 'large';
+ 
+ interface ButtonProps {
+   id: string;
+   children: React.ReactNode;
+   variant?: ButtonVariant;
+   size?: ButtonSize;
+   onClick?: () => void;
+   disabled?: boolean;
+   startIcon?: React.ReactNode;
+   endIcon?: React.ReactNode;
+   fullWidth?: boolean;
+   groupId?: string;
+   className?: string;
+   neighbors?: {
+     up?: string;
+     down?: string;
+     left?: string;
+     right?: string;
+   };
+ }
+ 
+ const getButtonStyles = (variant: ButtonVariant = 'primary', size: ButtonSize = 'medium') => {
+   // Base styles
+   let styles = css`
+     display: inline-flex;
+     align-items: center;
+     justify-content: center;
+     gap: 8px;
+     border: none;
+     border-radius: 6px;
+     font-weight: 500;
+     transition: all 0.2s ease;
+     cursor: pointer;
+     
+     &:disabled {
+       opacity: 0.5;
+       cursor: not-allowed;
+     }
+   `;
+   
+   // Add size styles
+   switch (size) {
+     case 'small':
+       styles = css`
+         ${styles}
+         padding: 8px 12px;
+         font-size: 14px;
+       `;
+       break;
+     case 'medium':
+       styles = css`
+         ${styles}
+         padding: 12px 20px;
+         font-size: 16px;
+       `;
+       break;
+     case 'large':
+       styles = css`
+         ${styles}
+         padding: 16px 32px;
+         font-size: 18px;
+       `;
+       break;
+   }
+   
+   // Add variant styles
+   switch (variant) {
+     case 'primary':
+       styles = css`
+         ${styles}
+         background-color: var(--primary-color);
+         color: var(--on-primary-color);
+         
+         &:hover:not(:disabled) {
+           background-color: var(--primary-color-hover);
+           transform: translateY(-2px);
+         }
+       `;
+       break;
+     case 'secondary':
+       styles = css`
+         ${styles}
+         background-color: var(--surface-color);
+         color: var(--on-surface-color);
+         border: 1px solid var(--border-color);
+         
+         &:hover:not(:disabled) {
+           background-color: var(--surface-hover-color);
+         }
+       `;
+       break;
+     case 'text':
+       styles = css`
+         ${styles}
+         background-color: transparent;
+         color: var(--primary-color);
+         padding-left: 8px;
+         padding-right: 8px;
+         
+         &:hover:not(:disabled) {
+           background-color: rgba(187, 134, 252, 0.1);
+         }
+       `;
+       break;
+     case 'icon':
+       styles = css`
+         ${styles}
+         background-color: transparent;
+         color: var(--on-surface-color);
+         padding: ${size === 'small' ? '6px' : size === 'medium' ? '10px' : '14px'};
+         border-radius: 50%;
+         
+         &:hover:not(:disabled) {
+           background-color: var(--surface-hover-color);
+         }
+       `;
+       break;
+     case 'danger':
+       styles = css`
+         ${styles}
+         background-color: var(--error-color, #f44336);
+         color: white;
+         
+         &:hover:not(:disabled) {
+           background-color: var(--error-color-hover, #d32f2f);
+         }
+       `;
+       break;
+   }
+   
+   return styles;
+ };
+ 
+ const StyledButton = styled.button<{
+   variant: ButtonVariant;
+   size: ButtonSize;
+   fullWidth?: boolean;
+   isFocused: boolean;
+ }>`
+   ${props => getButtonStyles(props.variant, props.size)}
+   
+   width: ${props => props.fullWidth ? '100%' : 'auto'};
+   
+   /* Focus styles */
+   ${props => props.isFocused && css`
+     ${props.variant !== 'text' && props.variant !== 'icon' && css`
+       box-shadow: 0 0 0 3px 
+         ${props.variant === 'primary' 
+           ? 'rgba(187, 134, 252, 0.4)' 
+           : props.variant === 'danger' 
+             ? 'rgba(244, 67, 54, 0.4)' 
+             : 'rgba(187, 134, 252, 0.3)'
+         };
+     `}
+     
+     /* Scale effect when focused */
+     transform: scale(1.05);
+     
+     /* Text buttons just get underline and background */
+     ${props.variant === 'text' && css`
+       text-decoration: underline;
+       background-color: rgba(187, 134, 252, 0.1);
+     `}
+     
+     /* Icon buttons just get a background */
+     ${props.variant === 'icon' && css`
+       background-color: var(--surface-hover-color);
+     `}
+   `}
+ `;
+ 
+ // Button Group Component
+ const ButtonGroupContainer = styled.div<{
+   gap?: number;
+   vertical?: boolean;
+ }>`
+   display: flex;
+   flex-direction: ${props => props.vertical ? 'column' : 'row'};
+   gap: ${props => props.gap || 8}px;
+   align-items: ${props => props.vertical ? 'stretch' : 'center'};
+ `;
+ 
+ export interface ButtonGroupProps {
+   children: React.ReactNode;
+   gap?: number;
+   vertical?: boolean;
+   groupId: string;
+   className?: string;
+ }
+ 
+ export const ButtonGroup: React.FC<ButtonGroupProps> = ({ 
+   children, 
+   gap,
+   vertical = false,
+   groupId,
+   className
+ }) => {
+   return (
+     <ButtonGroupContainer 
+       gap={gap} 
+       vertical={vertical}
+       className={className}
+       data-group-id={groupId}
+     >
+       {React.Children.map(children, (child) => {
+         if (React.isValidElement(child)) {
+           return React.cloneElement(child, {
+             ...child.props,
+             groupId: groupId,
+           });
+         }
+         return child;
+       })}
+     </ButtonGroupContainer>
+   );
+ };
+ 
+ const Button: React.FC<ButtonProps> = ({
+   id,
+   children,
+   variant = 'primary',
+   size = 'medium',
+   onClick,
+   disabled = false,
+   startIcon,
+   endIcon,
+   fullWidth = false,
+   groupId,
+   className,
+   neighbors
+ }) => {
+   const handleClick = () => {
+     if (!disabled && onClick) {
+       onClick();
+     }
+   };
+ 
+   return (
+     <FocusableItem
+       id={id}
+       onClick={handleClick}
+       disabled={disabled}
+       className={className}
+       neighbors={neighbors}
+       groupId={groupId}
+       indicatorScale={1.05}
+       noIndicator
+     >
+       {({ isFocused }) => (
+         <StyledButton
+           variant={variant}
+           size={size}
+           fullWidth={fullWidth}
+           isFocused={isFocused}
+           disabled={disabled}
+           type="button"
+         >
+           {startIcon && <span className="button-start-icon">{startIcon}</span>}
+           {children}
+           {endIcon && <span className="button-end-icon">{endIcon}</span>}
+         </StyledButton>
+       )}
+     </FocusableItem>
+   );
+ };
+ 
+ export default Button; 
```

---

Let's fix the type errors in the Button component:

---

```diff
            return React.cloneElement(child, {
              ...child.props,
-             groupId: groupId,
+             groupId,
            });
          }
```

```diff
        noIndicator
      >
-       {({ isFocused }) => (
        <StyledButton
          variant={variant}
          size={size}
          fullWidth={fullWidth}
-           isFocused={isFocused}
+         isFocused={false}
          disabled={disabled}
          type="button"
```

```diff
          {endIcon && <span className="button-end-icon">{endIcon}</span>}
        </StyledButton>
-       )}
      </FocusableItem>
    );
```

---

Let's try another way to handle the Button component, using the FocusableButton instead of FocusableItem:

---

```diff
  import React from 'react';
  import styled, { css } from 'styled-components';
- import FocusableItem from './FocusableItem';
+ import FocusableButton from './FocusableButton';
  
  // Button variants
```

```diff
  }
  
- const getButtonStyles = (variant: ButtonVariant = 'primary', size: ButtonSize = 'medium') => {
-   // Base styles
-   let styles = css`
+ // Enhanced Button styling
+ const StyledButton = styled(FocusableButton)<{
+   variant: ButtonVariant;
+   size: ButtonSize;
+   fullWidth?: boolean;
+   hasStartIcon?: boolean;
+   hasEndIcon?: boolean;
+   $disabled?: boolean;
+ }>`
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
-     border: none;
+   width: ${props => props.fullWidth ? '100%' : 'auto'};
    border-radius: 6px;
    font-weight: 500;
-     transition: all 0.2s ease;
-     cursor: pointer;
-     
-     &:disabled {
-       opacity: 0.5;
-       cursor: not-allowed;
-     }
-   `;
+   cursor: ${props => props.$disabled ? 'not-allowed' : 'pointer'};
+   opacity: ${props => props.$disabled ? 0.5 : 1};
    
-   // Add size styles
-   switch (size) {
+   /* Size styles */
+   ${props => {
+     switch (props.size) {
        case 'small':
-       styles = css`
-         ${styles}
+         return css`
            padding: 8px 12px;
            font-size: 14px;
          `;
-       break;
+       case 'large':
+         return css`
+           padding: 16px 32px;
+           font-size: 18px;
+         `;
        case 'medium':
-       styles = css`
-         ${styles}
+       default:
+         return css`
            padding: 12px 20px;
            font-size: 16px;
          `;
-       break;
-     case 'large':
-       styles = css`
-         ${styles}
-         padding: 16px 32px;
-         font-size: 18px;
-       `;
-       break;
-   }
+     }
+   }}
    
-   // Add variant styles
-   switch (variant) {
-     case 'primary':
-       styles = css`
-         ${styles}
-         background-color: var(--primary-color);
-         color: var(--on-primary-color);
-         
-         &:hover:not(:disabled) {
-           background-color: var(--primary-color-hover);
-           transform: translateY(-2px);
-         }
-       `;
-       break;
+   /* Variant styles */
+   ${props => {
+     switch (props.variant) {
        case 'secondary':
-       styles = css`
-         ${styles}
+         return css`
            background-color: var(--surface-color);
            color: var(--on-surface-color);
```

```diff
            }
          `;
-       break;
        case 'text':
-       styles = css`
-         ${styles}
+         return css`
            background-color: transparent;
            color: var(--primary-color);
```

```diff
            &:hover:not(:disabled) {
              background-color: rgba(187, 134, 252, 0.1);
+             text-decoration: underline;
            }
          `;
-       break;
        case 'icon':
-       styles = css`
-         ${styles}
+         return css`
            background-color: transparent;
            color: var(--on-surface-color);
-         padding: ${size === 'small' ? '6px' : size === 'medium' ? '10px' : '14px'};
+           padding: ${props.size === 'small' ? '6px' : props.size === 'medium' ? '10px' : '14px'};
            border-radius: 50%;
            
```

```diff
            }
          `;
-       break;
        case 'danger':
-       styles = css`
-         ${styles}
+         return css`
            background-color: var(--error-color, #f44336);
            color: white;
```

```diff
            }
          `;
-       break;
-   }
-   
-   return styles;
- };
- 
- const StyledButton = styled.button<{
-   variant: ButtonVariant;
-   size: ButtonSize;
-   fullWidth?: boolean;
-   isFocused: boolean;
- }>`
-   ${props => getButtonStyles(props.variant, props.size)}
-   
-   width: ${props => props.fullWidth ? '100%' : 'auto'};
-   
-   /* Focus styles */
-   ${props => props.isFocused && css`
-     ${props.variant !== 'text' && props.variant !== 'icon' && css`
-       box-shadow: 0 0 0 3px 
-         ${props.variant === 'primary' 
-           ? 'rgba(187, 134, 252, 0.4)' 
-           : props.variant === 'danger' 
-             ? 'rgba(244, 67, 54, 0.4)' 
-             : 'rgba(187, 134, 252, 0.3)'
-         };
-     `}
-     
-     /* Scale effect when focused */
-     transform: scale(1.05);
-     
-     /* Text buttons just get underline and background */
-     ${props.variant === 'text' && css`
-       text-decoration: underline;
-       background-color: rgba(187, 134, 252, 0.1);
-     `}
-     
-     /* Icon buttons just get a background */
-     ${props.variant === 'icon' && css`
-       background-color: var(--surface-hover-color);
-     `}
-   `}
+       case 'primary':
+       default:
+         return css`
+           background-color: var(--primary-color);
+           color: var(--on-primary-color);
+           
+           &:hover:not(:disabled) {
+             background-color: var(--primary-color-hover);
+           }
+         `;
+     }
+   }}
  `;
  
```

```diff
        {React.Children.map(children, (child) => {
          if (React.isValidElement(child)) {
+           // Only add groupId if it's our Button component
+           if (child.type === Button) {
              return React.cloneElement(child, {
-             ...child.props,
                groupId,
              });
+           }
          }
          return child;
```

```diff
    neighbors
  }) => {
-   const handleClick = () => {
-     if (!disabled && onClick) {
-       onClick();
-     }
-   };
- 
    return (
-     <FocusableItem
+     <StyledButton
        id={id}
-       onClick={handleClick}
-       disabled={disabled}
+       onClick={disabled ? undefined : onClick}
        className={className}
        neighbors={neighbors}
-       groupId={groupId}
-       indicatorScale={1.05}
-       noIndicator
-     >
-       <StyledButton
        variant={variant}
        size={size}
        fullWidth={fullWidth}
-         isFocused={false}
-         disabled={disabled}
-         type="button"
+       hasStartIcon={!!startIcon}
+       hasEndIcon={!!endIcon}
+       $disabled={disabled}
      >
        {startIcon && <span className="button-start-icon">{startIcon}</span>}
        {children}
        {endIcon && <span className="button-end-icon">{endIcon}</span>}
      </StyledButton>
-     </FocusableItem>
    );
  };
```

---

Let's simplify the ButtonGroup component to avoid the TypeScript error:

---

```diff
        data-group-id={groupId}
      >
-       {React.Children.map(children, (child) => {
-         if (React.isValidElement(child)) {
-           // Only add groupId if it's our Button component
-           if (child.type === Button) {
-             return React.cloneElement(child, {
-               groupId,
-             });
-           }
-         }
-         return child;
-       })}
+       {children}
      </ButtonGroupContainer>
    );
```

---

Now, let's implement the Carousel component:

---



---



---



---



---

